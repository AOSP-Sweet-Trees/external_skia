    1. store_src_rg                   coords = src.rg
    2. init_lane_masks                CondMask = LoopMask = RetMask = true
    3. zero_4_slots_unmasked          _0_m = 0
    4. zero_4_slots_unmasked          _1_mm = 0
    5. zero_slot_unmasked             $0 = 0
    6. zero_slot_unmasked             $1 = 0
    7. swizzle_4                      $0..3 = ($0..3).yxxy
    8. copy_4_slots_unmasked          _3_z = $0..3
    9. copy_4_constants               $0..3 = testMatrix2x2
   10. copy_4_slots_masked            _0_m = Mask($0..3)
   11. copy_4_constants               $0..3 = testMatrix2x2
   12. copy_4_slots_masked            _0_m = Mask($0..3)
   13. zero_4_slots_unmasked          $0..3 = 0
   14. copy_4_slots_unmasked          $4..7 = _0_m
   15. sub_4_floats                   $0..3 -= $4..7
   16. copy_4_slots_masked            _0_m = Mask($0..3)
   17. zero_slot_unmasked             $0 = 0
   18. zero_slot_unmasked             $1 = 0
   19. swizzle_4                      $0..3 = ($0..3).yxxy
   20. copy_4_slots_masked            _1_mm = Mask($0..3)
   21. zero_slot_unmasked             $0 = 0
   22. zero_slot_unmasked             $1 = 0
   23. swizzle_4                      $0..3 = ($0..3).yxxy
   24. copy_4_slots_masked            _1_mm = Mask($0..3)
   25. store_condition_mask           $51 = CondMask
   26. store_condition_mask           $21 = CondMask
   27. store_condition_mask           $8 = CondMask
   28. copy_4_slots_unmasked          $9..12 = _0_m
   29. zero_4_slots_unmasked          $13..16 = 0
   30. copy_4_constants               $17..20 = testMatrix2x2
   31. sub_4_floats                   $13..16 -= $17..20
   32. cmpeq_4_floats                 $9..12 = equal($9..12, $13..16)
   33. bitwise_and_2_ints             $9..10 &= $11..12
   34. bitwise_and_int                $9 &= $10
   35. copy_4_slots_unmasked          $10..13 = _1_mm
   36. copy_4_slots_unmasked          $14..17 = _3_z
   37. cmpeq_4_floats                 $10..13 = equal($10..13, $14..17)
   38. bitwise_and_2_ints             $10..11 &= $12..13
   39. bitwise_and_int                $10 &= $11
   40. bitwise_and_int                $9 &= $10
   41. zero_slot_unmasked             $22 = 0
   42. merge_condition_mask           CondMask = $8 & $9
   43. branch_if_no_active_lanes      branch_if_no_active_lanes +80 (#123)
   44. store_return_mask              $23 = RetMask
   45. zero_4_slots_unmasked          m(0..3) = 0
   46. zero_4_slots_unmasked          m(4..7) = 0
   47. zero_slot_unmasked             m(8) = 0
   48. zero_4_slots_unmasked          mm(0..3) = 0
   49. zero_4_slots_unmasked          mm(4..7) = 0
   50. zero_slot_unmasked             mm(8) = 0
   51. zero_slot_unmasked             $24 = 0
   52. zero_slot_unmasked             $25 = 0
   53. shuffle                        $24..32 = ($24..32)[1 0 0 0 1 0 0 0 1]
   54. copy_4_slots_unmasked          z(0..3) = $24..27
   55. copy_4_slots_unmasked          z(4..7) = $28..31
   56. copy_slot_unmasked             z(8) = $32
   57. copy_4_constants               $24..27 = testMatrix3x3(0..3)
   58. copy_4_constants               $28..31 = testMatrix3x3(4..7)
   59. copy_constant                  $32 = testMatrix3x3(8)
   60. copy_4_slots_masked            m(0..3) = Mask($24..27)
   61. copy_4_slots_masked            m(4..7) = Mask($28..31)
   62. copy_slot_masked               m(8) = Mask($32)
   63. copy_4_constants               $24..27 = testMatrix3x3(0..3)
   64. copy_4_constants               $28..31 = testMatrix3x3(4..7)
   65. copy_constant                  $32 = testMatrix3x3(8)
   66. copy_4_slots_masked            m(0..3) = Mask($24..27)
   67. copy_4_slots_masked            m(4..7) = Mask($28..31)
   68. copy_slot_masked               m(8) = Mask($32)
   69. zero_4_slots_unmasked          $24..27 = 0
   70. zero_4_slots_unmasked          $28..31 = 0
   71. zero_slot_unmasked             $32 = 0
   72. copy_4_slots_unmasked          $33..36 = m(0..3)
   73. copy_4_slots_unmasked          $37..40 = m(4..7)
   74. copy_slot_unmasked             $41 = m(8)
   75. sub_n_floats                   $24..32 -= $33..41
   76. copy_4_slots_masked            m(0..3) = Mask($24..27)
   77. copy_4_slots_masked            m(4..7) = Mask($28..31)
   78. copy_slot_masked               m(8) = Mask($32)
   79. zero_slot_unmasked             $24 = 0
   80. zero_slot_unmasked             $25 = 0
   81. shuffle                        $24..32 = ($24..32)[1 0 0 0 1 0 0 0 1]
   82. copy_4_slots_masked            mm(0..3) = Mask($24..27)
   83. copy_4_slots_masked            mm(4..7) = Mask($28..31)
   84. copy_slot_masked               mm(8) = Mask($32)
   85. zero_slot_unmasked             $24 = 0
   86. zero_slot_unmasked             $25 = 0
   87. shuffle                        $24..32 = ($24..32)[1 0 0 0 1 0 0 0 1]
   88. copy_4_slots_masked            mm(0..3) = Mask($24..27)
   89. copy_4_slots_masked            mm(4..7) = Mask($28..31)
   90. copy_slot_masked               mm(8) = Mask($32)
   91. copy_4_slots_unmasked          $24..27 = m(0..3)
   92. copy_4_slots_unmasked          $28..31 = m(4..7)
   93. copy_slot_unmasked             $32 = m(8)
   94. zero_4_slots_unmasked          $33..36 = 0
   95. zero_4_slots_unmasked          $37..40 = 0
   96. zero_slot_unmasked             $41 = 0
   97. copy_4_constants               $42..45 = testMatrix3x3(0..3)
   98. copy_4_constants               $46..49 = testMatrix3x3(4..7)
   99. copy_constant                  $50 = testMatrix3x3(8)
  100. sub_n_floats                   $33..41 -= $42..50
  101. cmpeq_n_floats                 $24..32 = equal($24..32, $33..41)
  102. bitwise_and_4_ints             $25..28 &= $29..32
  103. bitwise_and_2_ints             $25..26 &= $27..28
  104. bitwise_and_int                $25 &= $26
  105. bitwise_and_int                $24 &= $25
  106. copy_4_slots_unmasked          $25..28 = mm(0..3)
  107. copy_4_slots_unmasked          $29..32 = mm(4..7)
  108. copy_slot_unmasked             $33 = mm(8)
  109. copy_4_slots_unmasked          $34..37 = z(0..3)
  110. copy_4_slots_unmasked          $38..41 = z(4..7)
  111. copy_slot_unmasked             $42 = z(8)
  112. cmpeq_n_floats                 $25..33 = equal($25..33, $34..42)
  113. bitwise_and_4_ints             $26..29 &= $30..33
  114. bitwise_and_2_ints             $26..27 &= $28..29
  115. bitwise_and_int                $26 &= $27
  116. bitwise_and_int                $25 &= $26
  117. bitwise_and_int                $24 &= $25
  118. copy_slot_masked               [test_mat3_mat3].result = Mask($24)
  119. mask_off_return_mask           RetMask &= ~(CondMask & LoopMask & RetMask)
  120. load_return_mask               RetMask = $23
  121. copy_slot_unmasked             $23 = [test_mat3_mat3].result
  122. copy_slot_masked               $22 = Mask($23)
  123. load_condition_mask            CondMask = $8
  124. zero_slot_unmasked             $52 = 0
  125. merge_condition_mask           CondMask = $21 & $22
  126. branch_if_no_active_lanes      branch_if_no_active_lanes +107 (#233)
  127. store_return_mask              $53 = RetMask
  128. copy_4_constants               $54..57 = testInputs
  129. copy_4_constants               $58..61 = testInputs
  130. copy_4_constants               $62..65 = testInputs
  131. copy_4_constants               $66..69 = testInputs
  132. copy_4_slots_unmasked          testMatrix4x4(0..3) = $54..57
  133. copy_4_slots_unmasked          testMatrix4x4(4..7) = $58..61
  134. copy_4_slots_unmasked          testMatrix4x4(8..11) = $62..65
  135. copy_4_slots_unmasked          testMatrix4x4(12..15) = $66..69
  136. zero_4_slots_unmasked          m(0..3) = 0
  137. zero_4_slots_unmasked          m(4..7) = 0
  138. zero_4_slots_unmasked          m(8..11) = 0
  139. zero_4_slots_unmasked          m(12..15) = 0
  140. zero_4_slots_unmasked          mm(0..3) = 0
  141. zero_4_slots_unmasked          mm(4..7) = 0
  142. zero_4_slots_unmasked          mm(8..11) = 0
  143. zero_4_slots_unmasked          mm(12..15) = 0
  144. zero_slot_unmasked             $54 = 0
  145. zero_slot_unmasked             $55 = 0
  146. shuffle                        $54..69 = ($54..69)[1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1]
  147. copy_4_slots_unmasked          z(0..3) = $54..57
  148. copy_4_slots_unmasked          z(4..7) = $58..61
  149. copy_4_slots_unmasked          z(8..11) = $62..65
  150. copy_4_slots_unmasked          z(12..15) = $66..69
  151. copy_4_slots_unmasked          $54..57 = testMatrix4x4(0..3)
  152. copy_4_slots_unmasked          $58..61 = testMatrix4x4(4..7)
  153. copy_4_slots_unmasked          $62..65 = testMatrix4x4(8..11)
  154. copy_4_slots_unmasked          $66..69 = testMatrix4x4(12..15)
  155. copy_4_slots_masked            m(0..3) = Mask($54..57)
  156. copy_4_slots_masked            m(4..7) = Mask($58..61)
  157. copy_4_slots_masked            m(8..11) = Mask($62..65)
  158. copy_4_slots_masked            m(12..15) = Mask($66..69)
  159. copy_4_slots_unmasked          $54..57 = testMatrix4x4(0..3)
  160. copy_4_slots_unmasked          $58..61 = testMatrix4x4(4..7)
  161. copy_4_slots_unmasked          $62..65 = testMatrix4x4(8..11)
  162. copy_4_slots_unmasked          $66..69 = testMatrix4x4(12..15)
  163. copy_4_slots_masked            m(0..3) = Mask($54..57)
  164. copy_4_slots_masked            m(4..7) = Mask($58..61)
  165. copy_4_slots_masked            m(8..11) = Mask($62..65)
  166. copy_4_slots_masked            m(12..15) = Mask($66..69)
  167. zero_4_slots_unmasked          $54..57 = 0
  168. zero_4_slots_unmasked          $58..61 = 0
  169. zero_4_slots_unmasked          $62..65 = 0
  170. zero_4_slots_unmasked          $66..69 = 0
  171. copy_4_slots_unmasked          $70..73 = m(0..3)
  172. copy_4_slots_unmasked          $74..77 = m(4..7)
  173. copy_4_slots_unmasked          $78..81 = m(8..11)
  174. copy_4_slots_unmasked          $82..85 = m(12..15)
  175. sub_n_floats                   $54..69 -= $70..85
  176. copy_4_slots_masked            m(0..3) = Mask($54..57)
  177. copy_4_slots_masked            m(4..7) = Mask($58..61)
  178. copy_4_slots_masked            m(8..11) = Mask($62..65)
  179. copy_4_slots_masked            m(12..15) = Mask($66..69)
  180. zero_slot_unmasked             $54 = 0
  181. zero_slot_unmasked             $55 = 0
  182. shuffle                        $54..69 = ($54..69)[1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1]
  183. copy_4_slots_masked            mm(0..3) = Mask($54..57)
  184. copy_4_slots_masked            mm(4..7) = Mask($58..61)
  185. copy_4_slots_masked            mm(8..11) = Mask($62..65)
  186. copy_4_slots_masked            mm(12..15) = Mask($66..69)
  187. zero_slot_unmasked             $54 = 0
  188. zero_slot_unmasked             $55 = 0
  189. shuffle                        $54..69 = ($54..69)[1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1]
  190. copy_4_slots_masked            mm(0..3) = Mask($54..57)
  191. copy_4_slots_masked            mm(4..7) = Mask($58..61)
  192. copy_4_slots_masked            mm(8..11) = Mask($62..65)
  193. copy_4_slots_masked            mm(12..15) = Mask($66..69)
  194. copy_4_slots_unmasked          $54..57 = m(0..3)
  195. copy_4_slots_unmasked          $58..61 = m(4..7)
  196. copy_4_slots_unmasked          $62..65 = m(8..11)
  197. copy_4_slots_unmasked          $66..69 = m(12..15)
  198. zero_4_slots_unmasked          $70..73 = 0
  199. zero_4_slots_unmasked          $74..77 = 0
  200. zero_4_slots_unmasked          $78..81 = 0
  201. zero_4_slots_unmasked          $82..85 = 0
  202. copy_4_slots_unmasked          $86..89 = testMatrix4x4(0..3)
  203. copy_4_slots_unmasked          $90..93 = testMatrix4x4(4..7)
  204. copy_4_slots_unmasked          $94..97 = testMatrix4x4(8..11)
  205. copy_4_slots_unmasked          $98..101 = testMatrix4x4(12..15)
  206. sub_n_floats                   $70..85 -= $86..101
  207. cmpeq_n_floats                 $54..69 = equal($54..69, $70..85)
  208. bitwise_and_4_ints             $62..65 &= $66..69
  209. bitwise_and_4_ints             $58..61 &= $62..65
  210. bitwise_and_4_ints             $54..57 &= $58..61
  211. bitwise_and_2_ints             $54..55 &= $56..57
  212. bitwise_and_int                $54 &= $55
  213. copy_4_slots_unmasked          $55..58 = mm(0..3)
  214. copy_4_slots_unmasked          $59..62 = mm(4..7)
  215. copy_4_slots_unmasked          $63..66 = mm(8..11)
  216. copy_4_slots_unmasked          $67..70 = mm(12..15)
  217. copy_4_slots_unmasked          $71..74 = z(0..3)
  218. copy_4_slots_unmasked          $75..78 = z(4..7)
  219. copy_4_slots_unmasked          $79..82 = z(8..11)
  220. copy_4_slots_unmasked          $83..86 = z(12..15)
  221. cmpeq_n_floats                 $55..70 = equal($55..70, $71..86)
  222. bitwise_and_4_ints             $63..66 &= $67..70
  223. bitwise_and_4_ints             $59..62 &= $63..66
  224. bitwise_and_4_ints             $55..58 &= $59..62
  225. bitwise_and_2_ints             $55..56 &= $57..58
  226. bitwise_and_int                $55 &= $56
  227. bitwise_and_int                $54 &= $55
  228. copy_slot_masked               [test_mat4_mat4].result = Mask($54)
  229. mask_off_return_mask           RetMask &= ~(CondMask & LoopMask & RetMask)
  230. load_return_mask               RetMask = $53
  231. copy_slot_unmasked             $53 = [test_mat4_mat4].result
  232. copy_slot_masked               $52 = Mask($53)
  233. load_condition_mask            CondMask = $21
  234. copy_4_constants               $0..3 = colorRed
  235. merge_condition_mask           CondMask = $51 & $52
  236. copy_4_constants               $4..7 = colorGreen
  237. copy_4_slots_masked            $0..3 = Mask($4..7)
  238. load_condition_mask            CondMask = $51
  239. copy_4_slots_masked            [main].result = Mask($0..3)
  240. mask_off_return_mask           RetMask &= ~(CondMask & LoopMask & RetMask)
  241. load_src                       src.rgba = [main].result
